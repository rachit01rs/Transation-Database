DROP TRIGGER [trigger_update_moneysend_arch1] 
Go
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
go

CREATE TRIGGER [trigger_update_moneysend_arch1] ON [dbo].[moneysend_arch1]
    FOR DELETE
AS
    INSERT  INTO [dbo].[moneysend_arch1_audit]
            ( [Tranno] ,
              [refno] ,
              [agentid] ,
              [agentname] ,
              [Branch_code] ,
              [Branch] ,
              [CustomerId] ,
              [SenderName] ,
              [SenderAddress] ,
              [SenderPhoneno] ,
              [senderSalary] ,
              [senderFax] ,
              [SenderCity] ,
              [SenderCountry] ,
              [SenderEmail] ,
              [SenderCompany] ,
              [senderPassport] ,
              [senderVisa] ,
              [ReceiverName] ,
              [ReceiverAddress] ,
              [ReceiverPhone] ,
              [ReceiverFax] ,
              [ReceiverCity] ,
              [ReceiverCountry] ,
              [ReceiverRelation] ,
              [ReceiverIDDescription] ,
              [ReceiverID] ,
              [DOT] ,
              [DOtTime] ,
              [paidAmt] ,
              [paidCType] ,
              [receiveAmt] ,
              [receiveCType] ,
              [ExchangeRate] ,
              [Today_Dollar_rate] ,
              [Dollar_Amt] ,
              [SCharge] ,
              [ReciverMessage] ,
              [TestQuestion] ,
              [TestAnswer] ,
              [amtSenderType] ,
              [SenderBankID] ,
              [SenderBankName] ,
              [SenderBankBranch] ,
              [SenderBankVoucherNo] ,
              [Amt_paid_date] ,
              [paymentType] ,
              [rBankID] ,
              [rBankName] ,
              [rBankBranch] ,
              [rBankACNo] ,
              [rBankAcType] ,
              [otherCharge] ,
              [TransStatus] ,
              [status] ,
              [SEmpID] ,
              [bTno] ,
              [imeCommission] ,
              [bankCommission] ,
              [TotalRoundAmt] ,
              [TransferType] ,
              [paidBy] ,
              [paidDate] ,
              [paidTime] ,
              [courierID] ,
              [PODDate] ,
              [senderCommission] ,
              [receiverCommission] ,
              [approve_by] ,
              [receiveAgentID] ,
              [send_mode] ,
              [confirmDate] ,
              [lock_status] ,
              [lock_dot] ,
              [lock_by] ,
              [local_DOT] ,
              [sender_mobile] ,
              [receiver_mobile] ,
              [fax_trans] ,
              [SenderNativeCountry] ,
              [receiverEmail] ,
              [ip_address] ,
              [agent_dollar_rate] ,
              [ho_dollar_rate] ,
              [bonus_amt] ,
              [request_for_new_account] ,
              [trans_mode] ,
              [digital_id_sender] ,
              [digital_id_payout] ,
              [expected_payoutagentid] ,
              [bonus_value_amount] ,
              [bonus_type] ,
              [bonus_on] ,
              [ben_bank_id] ,
              [ben_bank_name] ,
              [test_Trn] ,
              [paid_agent_id] ,
              [send_sms] ,
              [agent_settlement_rate] ,
              [agent_ex_gain] ,
              [cancel_date] ,
              [cancel_by] ,
              [agent_receiverCommission] ,
              [agent_receiverSCommission] ,
              [door_to_door] ,
              [customer_sno] ,
              [paid_date_usd_rate] ,
              [upload_trn] ,
              [PNBReferenceNo] ,
              [receiverID_placeOfIssue] ,
              [mileage_earn] ,
              [tds_com_per] ,
              [agent_receiverComm_Currency] ,
              [source_of_income] ,
              [reason_for_remittance] ,
              [payout_settle_usd] ,
              [sPaymentReceivedType] ,
			  [sCheque_bank] ,
			  [sChequeno] ,
			  [IssueAuthority] ,
              [user_action] ,
              [update_ts],sender_occupation,ben_bank_branch_id,picture_id_type,transStatusPrevious
            )
            SELECT  [Tranno] ,
                    [refno] ,
                    [agentid] ,
                    [agentname] ,
                    [Branch_code] ,
                    [Branch] ,
                    [CustomerId] ,
                    [SenderName] ,
                    [SenderAddress] ,
                    [SenderPhoneno] ,
                    [senderSalary] ,
                    [senderFax] ,
                    [SenderCity] ,
                    [SenderCountry] ,
                    [SenderEmail] ,
                    [SenderCompany] ,
                    [senderPassport] ,
                    [senderVisa] ,
                    [ReceiverName] ,
                    [ReceiverAddress] ,
                    [ReceiverPhone] ,
                    [ReceiverFax] ,
                    [ReceiverCity] ,
                    [ReceiverCountry] ,
                    [ReceiverRelation] ,
                    [ReceiverIDDescription] ,
                    [ReceiverID] ,
                    [DOT] ,
                    [DOtTime] ,
                    [paidAmt] ,
                    [paidCType] ,
                    [receiveAmt] ,
                    [receiveCType] ,
                    [ExchangeRate] ,
                    [Today_Dollar_rate] ,
                    [Dollar_Amt] ,
                    [SCharge] ,
                    [ReciverMessage] ,
                    [TestQuestion] ,
                    [TestAnswer] ,
                    [amtSenderType] ,
                    [SenderBankID] ,
                    [SenderBankName] ,
                    [SenderBankBranch] ,
                    [SenderBankVoucherNo] ,
                    [Amt_paid_date] ,
                    [paymentType] ,
                    [rBankID] ,
                    [rBankName] ,
                    [rBankBranch] ,
                    [rBankACNo] ,
                    [rBankAcType] ,
                    [otherCharge] ,
                    [TransStatus] ,
                    [status] ,
                    [SEmpID] ,
                    [bTno] ,
                    [imeCommission] ,
                    [bankCommission] ,
                    [TotalRoundAmt] ,
                    [TransferType] ,
                    [paidBy] ,
                    [paidDate] ,
                    [paidTime] ,
                    [courierID] ,
                    [PODDate] ,
                    [senderCommission] ,
                    [receiverCommission] ,
                    [approve_by] ,
                    [receiveAgentID] ,
                    [send_mode] ,
                    [confirmDate] ,
                    [lock_status] ,
                    [lock_dot] ,
                    [lock_by] ,
                    [local_DOT] ,
                    [sender_mobile] ,
                    [receiver_mobile] ,
                    [fax_trans] ,
                    [SenderNativeCountry] ,
                    [receiverEmail] ,
                    [ip_address] ,
                    [agent_dollar_rate] ,
                    [ho_dollar_rate] ,
                    [bonus_amt] ,
                    [request_for_new_account] ,
                    [trans_mode] ,
                    [digital_id_sender] ,
                    [digital_id_payout] ,
                    [expected_payoutagentid] ,
                    [bonus_value_amount] ,
                    [bonus_type] ,
                    [bonus_on] ,
                    [ben_bank_id] ,
                    [ben_bank_name] ,
                    [test_Trn] ,
                    [paid_agent_id] ,
                    [send_sms] ,
                    [agent_settlement_rate] ,
                    [agent_ex_gain] ,
                    [cancel_date] ,
                    [cancel_by] ,
                    [agent_receiverCommission] ,
                    [agent_receiverSCommission] ,
                    [door_to_door] ,
                    [customer_sno] ,
                    [paid_date_usd_rate] ,
                    [upload_trn] ,
                    [PNBReferenceNo] ,
                    [receiverID_placeOfIssue] ,
                    [mileage_earn] ,
                    [tds_com_per] ,
                    [agent_receiverComm_Currency] ,
                    [source_of_income] ,
                    [reason_for_remittance] ,
                    [payout_settle_usd] ,
                    [sPaymentReceivedType] ,
					[sCheque_bank] ,
					[sChequeno] ,
					[IssueAuthority]  ,
                    'Delete' ,
                    GETDATE(),sender_occupation,ben_bank_branch_id,picture_id_type,transStatusPrevious
            FROM    deleted

