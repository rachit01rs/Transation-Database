DROP TRIGGER [trigger_update_moneysend] 
go
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
go
CREATE TRIGGER [trigger_update_moneysend] ON [dbo].[moneySend]
    FOR UPDATE
AS
    INSERT  INTO [moneysend_audit]
            ( [Tranno] ,
              [refno] ,
              [agentid] ,
              [agentname] ,
              [Branch_code] ,
              [Branch] ,
              [CustomerId] ,
              [SenderName] ,
              [SenderAddress] ,
              [SenderPhoneno] ,
              [senderSalary] ,
              [senderFax] ,
              [SenderCity] ,
              [SenderCountry] ,
              [SenderEmail] ,
              [SenderCompany] ,
              [senderPassport] ,
              [senderVisa] ,
              [ReceiverName] ,
              [ReceiverAddress] ,
              [ReceiverPhone] ,
              [ReceiverFax] ,
              [ReceiverCity] ,
              [ReceiverCountry] ,
              [ReceiverRelation] ,
              [ReceiverIDDescription] ,
              [ReceiverID] ,
              [DOT] ,
              [DOtTime] ,
              [paidAmt] ,
              [paidCType] ,
              [receiveAmt] ,
              [receiveCType] ,
              [ExchangeRate] ,
              [Today_Dollar_rate] ,
              [Dollar_Amt] ,
              [SCharge] ,
              [ReciverMessage] ,
              [TestQuestion] ,
              [TestAnswer] ,
              [amtSenderType] ,
              [SenderBankID] ,
              [SenderBankName] ,
              [SenderBankBranch] ,
              [SenderBankVoucherNo] ,
              [Amt_paid_date] ,
              [paymentType] ,
              [rBankID] ,
              [rBankName] ,
              [rBankBranch] ,
              [rBankACNo] ,
              [rBankAcType] ,
              [otherCharge] ,
              [TransStatus] ,
              [status] ,
              [SEmpID] ,
              [bTno] ,
              [imeCommission] ,
              [bankCommission] ,
              [TotalRoundAmt] ,
              [TransferType] ,
              [paidBy] ,
              [paidDate] ,
              [paidTime] ,
              [courierID] ,
              [PODDate] ,
              [senderCommission] ,
              [receiverCommission] ,
              [approve_by] ,
              [receiveAgentID] ,
              [send_mode] ,
              [confirmDate] ,
              [lock_status] ,
              [lock_dot] ,
              [lock_by] ,
              [local_DOT] ,
              [sender_mobile] ,
              [receiver_mobile] ,
              [fax_trans] ,
              [SenderNativeCountry] ,
              [receiverEmail] ,
              [ip_address] ,
              [agent_dollar_rate] ,
              [ho_dollar_rate] ,
              [bonus_amt] ,
              [request_for_new_account] ,
              [trans_mode] ,
              [digital_id_sender] ,
              [digital_id_payout] ,
              [msrepl_tran_version] ,
              [expected_payoutagentid] ,
              [bonus_value_amount] ,
              [bonus_type] ,
              [bonus_on] ,
              [ben_bank_id] ,
              [ben_bank_name] ,
              [test_Trn] ,
              [paid_agent_id] ,
              [send_sms] ,
              [agent_settlement_rate] ,
              [agent_ex_gain] ,
              [cancel_date] ,
              [cancel_by] ,
              [agent_receiverCommission] ,
              [agent_receiverSCommission] ,
              [door_to_door] ,
              [customer_sno] ,
              [paid_date_usd_rate] ,
              [upload_trn] ,
              [PNBReferenceNo] ,
              [receiverID_placeOfIssue] ,
              [mileage_earn] ,
              [tds_com_per] ,
              [agent_receiverComm_Currency] ,
              [paid_beneficiary_ID_type] ,
              [paid_beneficiary_ID_number] ,
              [source_of_income] ,
              [reason_for_remittance] ,
              [payout_settle_usd] ,
              [confirm_process_id] ,
              [costValue_SC] ,
              [costValue_PC] ,
              [Send_Settle_USD] ,
              [c2c_receiver_code] ,
              [c2c_secure_pwd] ,
              [ofac_list] ,
              [ofac_app_by] ,
              [ofac_app_ts] ,
              [ho_cost_send_rate] ,
              [ho_premium_send_rate] ,
              [ho_premium_payout_rate] ,
              [agent_customer_diff_value] ,
              [agent_sending_rate_margin] ,
              [agent_payout_rate_margin] ,
              [agent_sending_cust_exchangerate] ,
              [agent_payout_agent_cust_rate] ,
              [ho_exrate_applied_type] ,
              [c2c_pin_no] ,
              [HO_confirmDate] ,
              [HO_paidDate] ,
              [HO_cancel_Date] ,
              [sender_fax_no] ,
              [ID_Issue_date] ,
              [SSN_Card_ID] ,
              [Date_of_Birth] ,
              [Sender_State] ,
              [compliance_flag] ,
              [compliance_sys_msg] ,
              [transfer_ts] ,
              [HO_ex_gain] ,
              [ext_sCharge] ,
              [xm_exRate] ,
              [ext_settlement_amt] ,
              [isIRH_trn] ,
              [is_downloaded] ,
              [downloaded_by] ,
              [downloaded_ts] ,
              [ext_payout_amount] ,
              [sPaymentReceivedType] ,
              [sCheque_bank] ,
              [sChequeno] ,
              [IssueAuthority] ,
              [log_ts] ,
              [log_user] ,
              sender_occupation ,
              ben_bank_branch_id ,
              picture_id_type ,
              transStatusPrevious
            )
            SELECT  [Tranno] ,
                    [refno] ,
                    [agentid] ,
                    [agentname] ,
                    [Branch_code] ,
                    [Branch] ,
                    [CustomerId] ,
                    [SenderName] ,
                    [SenderAddress] ,
                    [SenderPhoneno] ,
                    [senderSalary] ,
                    [senderFax] ,
                    [SenderCity] ,
                    [SenderCountry] ,
                    [SenderEmail] ,
                    [SenderCompany] ,
                    [senderPassport] ,
                    [senderVisa] ,
                    [ReceiverName] ,
                    [ReceiverAddress] ,
                    [ReceiverPhone] ,
                    [ReceiverFax] ,
                    [ReceiverCity] ,
                    [ReceiverCountry] ,
                    [ReceiverRelation] ,
                    [ReceiverIDDescription] ,
                    [ReceiverID] ,
                    [DOT] ,
                    [DOtTime] ,
                    [paidAmt] ,
                    [paidCType] ,
                    [receiveAmt] ,
                    [receiveCType] ,
                    [ExchangeRate] ,
                    [Today_Dollar_rate] ,
                    [Dollar_Amt] ,
                    [SCharge] ,
                    [ReciverMessage] ,
                    [TestQuestion] ,
                    [TestAnswer] ,
                    [amtSenderType] ,
                    [SenderBankID] ,
                    [SenderBankName] ,
                    [SenderBankBranch] ,
                    [SenderBankVoucherNo] ,
                    [Amt_paid_date] ,
                    [paymentType] ,
                    [rBankID] ,
                    [rBankName] ,
                    [rBankBranch] ,
                    [rBankACNo] ,
                    [rBankAcType] ,
                    [otherCharge] ,
                    [TransStatus] ,
                    [status] ,
                    [SEmpID] ,
                    [bTno] ,
                    [imeCommission] ,
                    [bankCommission] ,
                    [TotalRoundAmt] ,
                    [TransferType] ,
                    [paidBy] ,
                    [paidDate] ,
                    [paidTime] ,
                    [courierID] ,
                    [PODDate] ,
                    [senderCommission] ,
                    [receiverCommission] ,
                    [approve_by] ,
                    [receiveAgentID] ,
                    [send_mode] ,
                    [confirmDate] ,
                    [lock_status] ,
                    [lock_dot] ,
                    [lock_by] ,
                    [local_DOT] ,
                    [sender_mobile] ,
                    [receiver_mobile] ,
                    [fax_trans] ,
                    [SenderNativeCountry] ,
                    [receiverEmail] ,
                    [ip_address] ,
                    [agent_dollar_rate] ,
                    [ho_dollar_rate] ,
                    [bonus_amt] ,
                    [request_for_new_account] ,
                    [trans_mode] ,
                    [digital_id_sender] ,
                    [digital_id_payout] ,
                    [msrepl_tran_version] ,
                    [expected_payoutagentid] ,
                    [bonus_value_amount] ,
                    [bonus_type] ,
                    [bonus_on] ,
                    [ben_bank_id] ,
                    [ben_bank_name] ,
                    [test_Trn] ,
                    [paid_agent_id] ,
                    [send_sms] ,
                    [agent_settlement_rate] ,
                    [agent_ex_gain] ,
                    [cancel_date] ,
                    [cancel_by] ,
                    [agent_receiverCommission] ,
                    [agent_receiverSCommission] ,
                    [door_to_door] ,
                    [customer_sno] ,
                    [paid_date_usd_rate] ,
                    [upload_trn] ,
                    [PNBReferenceNo] ,
                    [receiverID_placeOfIssue] ,
                    [mileage_earn] ,
                    [tds_com_per] ,
                    [agent_receiverComm_Currency] ,
                    [paid_beneficiary_ID_type] ,
                    [paid_beneficiary_ID_number] ,
                    [source_of_income] ,
                    [reason_for_remittance] ,
                    [payout_settle_usd] ,
                    [confirm_process_id] ,
                    [costValue_SC] ,
                    [costValue_PC] ,
                    [Send_Settle_USD] ,
                    [c2c_receiver_code] ,
                    [c2c_secure_pwd] ,
                    [ofac_list] ,
                    [ofac_app_by] ,
                    [ofac_app_ts] ,
                    [ho_cost_send_rate] ,
                    [ho_premium_send_rate] ,
                    [ho_premium_payout_rate] ,
                    [agent_customer_diff_value] ,
                    [agent_sending_rate_margin] ,
                    [agent_payout_rate_margin] ,
                    [agent_sending_cust_exchangerate] ,
                    [agent_payout_agent_cust_rate] ,
                    [ho_exrate_applied_type] ,
                    [c2c_pin_no] ,
                    [HO_confirmDate] ,
                    [HO_paidDate] ,
                    [HO_cancel_Date] ,
                    [sender_fax_no] ,
                    [ID_Issue_date] ,
                    [SSN_Card_ID] ,
                    [Date_of_Birth] ,
                    [Sender_State] ,
                    [compliance_flag] ,
                    [compliance_sys_msg] ,
                    [transfer_ts] ,
                    [HO_ex_gain] ,
                    [ext_sCharge] ,
                    [xm_exRate] ,
                    [ext_settlement_amt] ,
                    [isIRH_trn] ,
                    [is_downloaded] ,
                    [downloaded_by] ,
                    [downloaded_ts] ,
                    [ext_payout_amount] ,
                    [sPaymentReceivedType] ,
                    [sCheque_bank] ,
                    [sChequeno] ,
                    [IssueAuthority] ,
                    GETDATE() ,
                    SYSTEM_USER ,
                    sender_occupation ,
                    ben_bank_branch_id ,
                    picture_id_type ,
                    transStatusPrevious
            FROM    Deleted